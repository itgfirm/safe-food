<md-content>
  <md-toolbar>
    <div class="md-toolbar-tools">
      <h1>Safe Food</h1>
      <span flex></span>
      <md-button ng-click="advancedSearch = !advancedSearch">
        {{advancedSearch ? 'Basic Search' : 'Advanced Search'}}
      </md-button>
    </div>
  </md-toolbar>

  <form name="recall-search" layout-padding>
    <div ng-if="advancedSearch" layout="row" layout-wrap>
      <md-input-container flex="33" flex-sm="50">
        <label>City</label>
        <input name="city" ng-model="searchParams.city">
      </md-input-container>
      <md-input-container flex="33" flex-sm="50">
        <label>State</label>
        <input name="state" ng-model="searchParams.state">
      </md-input-container>
      <md-input-container flex="33" flex-sm="50">
        <label>Company Name</label>
        <input name="companyName" ng-model="searchParams.recalling_firm">
      </md-input-container>
      <md-input-container flex="33" flex-sm="50">
        <label>Recall Start Date</label>
        <input type="date" name="recallStartDate" ng-model="searchParams.recallStartDate">
      </md-input-container>
      <md-input-container flex="33" flex-sm="50">
        <label>Recall End Date</label>
        <input type="date" name="recallEndDate" ng-model="searchParams.recallEndDate">
      </md-input-container>
      <md-input-container flex="33" flex-sm="50">
        <label>Product Description</label>
        <input name="productType" ng-model="searchParams.product_description">
      </md-input-container>
    </div>

    <div ng-if="!advancedSearch" layout="row" layout-wrap>
      <md-input-container flex="33" flex-sm="50">
        <label>example: Spinach MI</label>
        <input name="generalSearch" ng-model="searchParams.generalSearch">
      </md-input-container>
    </div>

    <div class="md-action" layout="row" layout-align="end center">
      <md-button class="md-raised md-primary"
        ng-click="searchDisclaimer(searchParams)"
        aria-label="Search">
        Search
      </md-button>
    </div>
  </form>

  <md-divider></md-divider>
<md-content>

  <center ng-if="recallData.error.code === 'NOT_FOUND'">
    <h4><strong>Record(s) Not Found!</strong></h4>
    <p>Your search did not return any results. Please modify your search criteria and try again!</p>
  </center>

  <section>
    <md-card ng-repeat="item in recallData.results track by $index"
      ng-click="viewDetails(item)">
      <md-card-content>
        <h2 class="md-title">{{item.recalling_firm}} ({{item.recall_number}})</h2>
        <div><strong>Recall Initiated:</strong> {{item.recall_initiation_date}} ({{item.status}})</div>
        <div><strong>Distribution Pattern:</strong> {{item.distribution_pattern}}</div>
        <div><strong>Product Description:</strong> {{item.product_description}}</div>
      </md-card-content>
    </md-card>
  </section>
</md-content>
<footer align="right" style="font-size:12px;padding-right:5px;">The openFDA beta research project contents were last updated on {{recallData.meta.last_updated | date:'MMMM dd, yyyy'}}</footer>
</md-content>